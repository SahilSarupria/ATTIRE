(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[323],{4964:(e,s,a)=>{"use strict";a.d(s,{Xi:()=>c,av:()=>o,j7:()=>d,tU:()=>n});var t=a(5155),r=a(2115),i=a(704),l=a(3999);let n=i.bL,d=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(i.B8,{ref:s,className:(0,l.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",a),...r})});d.displayName=i.B8.displayName;let c=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(i.l9,{ref:s,className:(0,l.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",a),...r})});c.displayName=i.l9.displayName;let o=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(i.UC,{ref:s,className:(0,l.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",a),...r})});o.displayName=i.UC.displayName},7944:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>$});var t=a(5155),r=a(2115),i=a(5695),l=a(7168),n=a(8482),d=a(4964),c=a(4940),o=a(9588),m=a(9869),u=a(1154),x=a(7809),f=a(1976),p=a(9474);function h(e){let{onTranscription:s}=e,[a,i]=(0,r.useState)(!1),[n,d]=(0,r.useState)(!1),c=(0,r.useRef)(null),m=(0,r.useRef)([]),x=async()=>{let e=new MediaRecorder(await navigator.mediaDevices.getUserMedia({audio:!0}));c.current=e,m.current=[],e.ondataavailable=e=>{m.current.push(e.data)},e.onstop=async()=>{let e=new Blob(m.current,{type:"audio/webm"});d(!0);try{let a=new FormData;a.append("audio",e,"recording.webm");let t=await fetch("/api/transcribe",{method:"POST",body:a}),r=await t.json();r.text?s(r.text):console.error("No transcription text received.")}catch(e){console.error("Transcription failed",e)}finally{d(!1)}},e.start(),i(!0)};return(0,t.jsx)("div",{className:"space-y-2",children:(0,t.jsx)(l.$,{onClick:a?()=>{var e;null===(e=c.current)||void 0===e||e.stop(),i(!1)}:x,disabled:n,variant:"secondary",children:n?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(u.A,{className:"mr-2 h-4 w-4 animate-spin"}),"Transcribing..."]}):a?"Stop Recording":(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(o.A,{className:"mr-2 h-4 w-4"}),"Record Voice"]})})})}var g=a(4416),j=a(7213),v=a(3580);function y(e){let{onImageUpload:s,onImageAnalysis:a}=e,[i,n]=(0,r.useState)(null),[d,c]=(0,r.useState)(!1),[o,x]=(0,r.useState)(!1),{toast:f}=(0,v.dj)(),p=async e=>{let t=URL.createObjectURL(e);if(n(t),s(t,e),a){x(!0);try{let s=new FormData;s.append("image",e);let t=await fetch("/api/analyze-image",{method:"POST",body:s}),r=await t.json();if(r.error)throw Error(r.error);a(r.enhancedPrompt),f({title:"Image Analyzed",description:"We've analyzed your reference image and created a detailed description."})}catch(e){console.error("Error analyzing image:",e),f({title:"Analysis Failed",description:"There was an error analyzing your image. Please try again or use text input instead.",variant:"destructive"})}finally{x(!1)}}};return(0,t.jsx)("div",{className:"w-full",children:i?(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("img",{src:i||"/placeholder.svg",alt:"Reference image",className:"w-full h-auto rounded-lg object-cover max-h-[300px]"}),o&&(0,t.jsx)("div",{className:"absolute inset-0 bg-background/80 flex items-center justify-center rounded-lg",children:(0,t.jsxs)("div",{className:"flex flex-col items-center gap-2",children:[(0,t.jsx)(u.A,{className:"h-8 w-8 animate-spin text-primary"}),(0,t.jsx)("p",{className:"text-sm font-medium",children:"Analyzing image..."})]})}),(0,t.jsx)(l.$,{variant:"destructive",size:"icon",className:"absolute top-2 right-2 rounded-full",onClick:()=>{n(null)},disabled:o,children:(0,t.jsx)(g.A,{className:"h-4 w-4"})})]}):(0,t.jsx)("div",{className:"border-2 border-dashed rounded-lg p-12 flex flex-col items-center justify-center transition-colors ".concat(d?"border-primary bg-primary/10":"border-muted-foreground/20"),onDragOver:e=>{e.preventDefault(),c(!0)},onDragLeave:()=>{c(!1)},onDrop:e=>{var s;if(e.preventDefault(),c(!1),null===(s=e.dataTransfer.files)||void 0===s?void 0:s.length){let s=e.dataTransfer.files[0];s.type.startsWith("image/")&&p(s)}},children:(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center gap-4",children:[d?(0,t.jsx)(j.A,{className:"h-10 w-10 text-primary"}):(0,t.jsx)(m.A,{className:"h-10 w-10 text-muted-foreground"}),(0,t.jsxs)("div",{className:"flex flex-col items-center gap-1",children:[(0,t.jsx)("p",{className:"text-sm font-medium",children:d?"Drop image here":"Drag and drop your reference image"}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"or"}),(0,t.jsxs)("label",{htmlFor:"file-upload",className:"cursor-pointer",children:[(0,t.jsx)("span",{className:"text-sm text-primary font-medium",children:"Browse files"}),(0,t.jsx)("input",{id:"file-upload",type:"file",accept:"image/*",className:"hidden",onChange:e=>{var s;let a=null===(s=e.target.files)||void 0===s?void 0:s[0];a&&p(a)}})]})]}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground text-center",children:"Upload a reference image of clothing you'd like to use as inspiration"})]})})})}var N=a(3081),b=a(6474),w=a(7863),C=a(5196),R=a(3999);let S=N.bL;N.YJ;let k=N.WT,T=r.forwardRef((e,s)=>{let{className:a,children:r,...i}=e;return(0,t.jsxs)(N.l9,{ref:s,className:(0,R.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",a),...i,children:[r,(0,t.jsx)(N.In,{asChild:!0,children:(0,t.jsx)(b.A,{className:"h-4 w-4 opacity-50"})})]})});T.displayName=N.l9.displayName;let A=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(N.PP,{ref:s,className:(0,R.cn)("flex cursor-default items-center justify-center py-1",a),...r,children:(0,t.jsx)(w.A,{className:"h-4 w-4"})})});A.displayName=N.PP.displayName;let F=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(N.wn,{ref:s,className:(0,R.cn)("flex cursor-default items-center justify-center py-1",a),...r,children:(0,t.jsx)(b.A,{className:"h-4 w-4"})})});F.displayName=N.wn.displayName;let D=r.forwardRef((e,s)=>{let{className:a,children:r,position:i="popper",...l}=e;return(0,t.jsx)(N.ZL,{children:(0,t.jsxs)(N.UC,{ref:s,className:(0,R.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===i&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",a),position:i,...l,children:[(0,t.jsx)(A,{}),(0,t.jsx)(N.LM,{className:(0,R.cn)("p-1","popper"===i&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:r}),(0,t.jsx)(F,{})]})})});D.displayName=N.UC.displayName,r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(N.JU,{ref:s,className:(0,R.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",a),...r})}).displayName=N.JU.displayName;let E=r.forwardRef((e,s)=>{let{className:a,children:r,...i}=e;return(0,t.jsxs)(N.q7,{ref:s,className:(0,R.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),...i,children:[(0,t.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,t.jsx)(N.VF,{children:(0,t.jsx)(C.A,{className:"h-4 w-4"})})}),(0,t.jsx)(N.p4,{children:r})]})});E.displayName=N.q7.displayName,r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(N.wv,{ref:s,className:(0,R.cn)("-mx-1 my-1 h-px bg-muted",a),...r})}).displayName=N.wv.displayName;var U=a(6740);function P(e){let{prompt:s,onEstimationComplete:a}=e,[i,d]=(0,r.useState)("shirt"),[c,o]=(0,r.useState)(!1),{toast:m}=(0,v.dj)(),x=async()=>{if(!s){m({title:"Missing Information",description:"Please provide a design description first.",variant:"destructive"});return}o(!0);try{let e=await fetch("/api/estimate-cost",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({prompt:s,designType:i})}),t=await e.json();if(t.error)throw Error(t.error);a(t.estimatedCost,t.breakdown)}catch(e){console.error("Error estimating cost:",e),m({title:"Estimation Failed",description:"There was an error estimating the cost. Please try again.",variant:"destructive"})}finally{o(!1)}};return(0,t.jsxs)(n.Zp,{children:[(0,t.jsx)(n.aR,{children:(0,t.jsx)(n.ZB,{className:"text-lg",children:"Estimate Manufacturing Cost"})}),(0,t.jsxs)(n.Wu,{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{htmlFor:"design-type",className:"text-sm font-medium",children:"Clothing Type"}),(0,t.jsxs)(S,{value:i,onValueChange:d,children:[(0,t.jsx)(T,{id:"design-type",children:(0,t.jsx)(k,{placeholder:"Select clothing type"})}),(0,t.jsxs)(D,{children:[(0,t.jsx)(E,{value:"shirt",children:"T-Shirt / Shirt"}),(0,t.jsx)(E,{value:"dress",children:"Dress"}),(0,t.jsx)(E,{value:"jacket",children:"Jacket / Coat"}),(0,t.jsx)(E,{value:"pants",children:"Pants / Trousers"}),(0,t.jsx)(E,{value:"skirt",children:"Skirt"}),(0,t.jsx)(E,{value:"sweater",children:"Sweater"}),(0,t.jsx)(E,{value:"other",children:"Other"})]})]})]}),(0,t.jsx)(l.$,{className:"w-full",onClick:x,disabled:c||!s,children:c?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(u.A,{className:"mr-2 h-4 w-4 animate-spin"}),"Calculating..."]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(U.A,{className:"mr-2 h-4 w-4"}),"Estimate Cost"]})})]})]})}let Z=(0,a(2085).F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function z(e){let{className:s,variant:a,...r}=e;return(0,t.jsx)("div",{className:(0,R.cn)(Z({variant:a}),s),...r})}function W(e){let{cost:s,breakdown:a}=e;return(0,t.jsxs)(n.Zp,{children:[(0,t.jsx)(n.aR,{children:(0,t.jsx)(n.ZB,{className:"text-lg",children:"Manufacturing Cost Estimate"})}),(0,t.jsxs)(n.Wu,{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center border-b pb-2",children:[(0,t.jsx)("span",{className:"text-lg font-bold",children:"Total Estimate:"}),(0,t.jsxs)("span",{className:"text-2xl font-bold",children:["$",s.toFixed(2)]})]}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsxs)("span",{className:"text-sm",children:["Material (",(0,R.Z)(a.material.type),"):"]}),(0,t.jsxs)("span",{className:"font-medium",children:["$",a.material.cost.toFixed(2)]})]}),(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsx)("span",{className:"text-sm",children:"Labor:"}),(0,t.jsxs)("span",{className:"font-medium",children:["$",a.labor.toFixed(2)]})]}),a.complexityFeatures.length>0&&(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)("span",{className:"text-sm",children:"Complexity Features:"}),(0,t.jsx)("div",{className:"flex flex-wrap gap-1",children:a.complexityFeatures.map(e=>(0,t.jsx)(z,{variant:"outline",children:(0,R.Z)(e)},e))}),(0,t.jsxs)("div",{className:"flex justify-between items-center text-xs text-muted-foreground",children:[(0,t.jsx)("span",{children:"Complexity Multiplier:"}),(0,t.jsxs)("span",{children:["x",a.complexityMultiplier.toFixed(2)]})]})]})]}),(0,t.jsx)("div",{className:"text-xs text-muted-foreground mt-4",children:(0,t.jsx)("p",{children:"This is an estimate based on the design description and may vary based on final specifications."})})]})]})}var O=a(7288);function $(){(0,i.useRouter)();let[e,s]=(0,r.useState)("text"),[a,g]=(0,r.useState)(""),[j,N]=(0,r.useState)(!1),[b,w]=(0,r.useState)(null),[C,R]=(0,r.useState)(null),[S,k]=(0,r.useState)(null),[T,A]=(0,r.useState)(null),{toast:F}=(0,v.dj)(),D=async()=>{if(a){N(!0),k(null),A(null);try{let e=await fetch("/api/generate-design",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({prompt:a,referenceImageUrl:(null==C?void 0:C.url)||null})}),s=await e.json();if(s.error)throw Error(s.error);w(s.imageUrl),F({title:"Design Generated",description:"Your custom clothing design has been created!"})}catch(e){console.error("Error generating design:",e),F({title:"Generation Failed",description:"There was an error generating your design. Please try again.",variant:"destructive"})}finally{N(!1)}}};return(0,t.jsxs)("div",{className:"container mx-auto py-8 px-4",children:[(0,t.jsx)(t.Fragment,{children:(0,t.jsx)(O.default,{})}),(0,t.jsx)("br",{}),(0,t.jsx)("br",{}),(0,t.jsx)("h1",{className:"text-3xl font-bold mb-8",children:"Create Your Custom Design"}),(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)(d.tU,{value:e,onValueChange:s,className:"w-full",children:[(0,t.jsxs)(d.j7,{className:"grid grid-cols-3 mb-4",children:[(0,t.jsxs)(d.Xi,{value:"text",className:"flex items-center gap-2",children:[(0,t.jsx)(c.A,{className:"h-4 w-4"}),"Text"]}),(0,t.jsxs)(d.Xi,{value:"voice",className:"flex items-center gap-2",children:[(0,t.jsx)(o.A,{className:"h-4 w-4"}),"Voice"]}),(0,t.jsxs)(d.Xi,{value:"upload",className:"flex items-center gap-2",children:[(0,t.jsx)(m.A,{className:"h-4 w-4"}),"Upload"]})]}),(0,t.jsx)(d.av,{value:"voice",className:"space-y-4",children:(0,t.jsx)(n.Zp,{children:(0,t.jsx)(n.Wu,{className:"pt-6",children:(0,t.jsx)(h,{onTranscription:e=>{g(e)}})})})}),(0,t.jsx)(d.av,{value:"upload",className:"space-y-4",children:(0,t.jsx)(n.Zp,{children:(0,t.jsx)(n.Wu,{className:"pt-6",children:(0,t.jsx)(y,{onImageUpload:(e,s)=>{R({url:e,file:s})},onImageAnalysis:e=>{g(e)}})})})}),(0,t.jsx)(d.av,{value:"text",className:"space-y-4",children:(0,t.jsx)(n.Zp,{children:(0,t.jsx)(n.Wu,{className:"pt-6",children:(0,t.jsx)(p.T,{placeholder:"Describe your perfect clothing item in detail...",className:"min-h-[150px]",value:a,onChange:e=>g(e.target.value)})})})})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-medium mb-2",children:"Your prompt:"}),(0,t.jsx)(n.Zp,{className:"bg-muted",children:(0,t.jsx)(n.Wu,{className:"py-4",children:a||"No prompt yet. Use one of the input methods above."})})]}),(0,t.jsx)(l.$,{className:"w-full",size:"lg",disabled:!a||j,onClick:D,children:j?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(u.A,{className:"mr-2 h-4 w-4 animate-spin"}),"Generating Design..."]}):"Generate Design"}),a&&!j&&(0,t.jsx)(P,{prompt:a,onEstimationComplete:(e,s)=>{k(e),A(s),F({title:"Cost Estimate Complete",description:"Estimated manufacturing cost: $".concat(e.toFixed(2))})}})]}),(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsx)("h2",{className:"text-xl font-semibold",children:"Generated Design"}),(0,t.jsx)(n.Zp,{className:"overflow-hidden",children:(0,t.jsx)(n.Wu,{className:"p-0",children:b?(0,t.jsx)("img",{src:b||"/placeholder.svg",alt:"Generated clothing design",className:"w-full h-auto"}):(0,t.jsx)("div",{className:"aspect-[3/4] flex items-center justify-center bg-muted text-muted-foreground",children:"Your design will appear here"})})}),b&&(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)(l.$,{size:"lg",className:"w-full",onClick:()=>{F({title:"Added to Cart",description:"Your custom design has been added to your cart!"})},children:[(0,t.jsx)(x.A,{className:"mr-2 h-4 w-4"}),"Add to Cart"]}),(0,t.jsxs)(l.$,{variant:"outline",size:"lg",className:"w-full",onClick:()=>{F({title:"Added to Wishlist",description:"Your custom design has been saved to your wishlist!"})},children:[(0,t.jsx)(f.A,{className:"mr-2 h-4 w-4"}),"Save Design"]})]}),null!==S&&T&&(0,t.jsx)(W,{cost:S,breakdown:T})]})]})]})}},8321:(e,s,a)=>{Promise.resolve().then(a.bind(a,7944))},8482:(e,s,a)=>{"use strict";a.d(s,{BT:()=>c,Wu:()=>o,ZB:()=>d,Zp:()=>l,aR:()=>n,wL:()=>m});var t=a(5155),r=a(2115),i=a(3999);let l=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)("div",{ref:s,className:(0,i.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",a),...r})});l.displayName="Card";let n=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)("div",{ref:s,className:(0,i.cn)("flex flex-col space-y-1.5 p-6",a),...r})});n.displayName="CardHeader";let d=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)("div",{ref:s,className:(0,i.cn)("text-2xl font-semibold leading-none tracking-tight",a),...r})});d.displayName="CardTitle";let c=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)("div",{ref:s,className:(0,i.cn)("text-sm text-muted-foreground",a),...r})});c.displayName="CardDescription";let o=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)("div",{ref:s,className:(0,i.cn)("p-6 pt-0",a),...r})});o.displayName="CardContent";let m=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)("div",{ref:s,className:(0,i.cn)("flex items-center p-6 pt-0",a),...r})});m.displayName="CardFooter"},9474:(e,s,a)=>{"use strict";a.d(s,{T:()=>l});var t=a(5155),r=a(2115),i=a(3999);let l=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)("textarea",{className:(0,i.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),ref:s,...r})});l.displayName="Textarea"}},e=>{var s=s=>e(e.s=s);e.O(0,[413,883,719,756,288,441,684,358],()=>s(8321)),_N_E=e.O()}]);